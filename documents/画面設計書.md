画面設計書：AI チャット英語学習システム

1. 概要
   1.1. 目的
   本ドキュメントは、AI チャット英語学習システムの画面設計を定義するものである。ユーザーインターフェースのレイアウト、UI要素、操作フローを詳細に記載する。

   1.2. 対象読者
   - UI/UX デザイナー
   - フロントエンドエンジニア
   - QA エンジニア
   - プロジェクトマネージャー

   1.3. 設計原則
   - **直感性**: 初めて利用するユーザーでも直感的に操作できる
   - **アクセシビリティ**: ユニバーサルデザインを意識した設計
   - **レスポンシブ**: PC・スマートフォン両方に対応
   - **パフォーマンス**: スムーズな画面遷移と操作感

   1.4. 画面一覧
   | 画面ID | 画面名 | 概要 | 認証要件 |
   |--------|--------|------|---------|
   | S-01 | 新規登録画面 | 新規ユーザーがアカウントを作成する画面 | 不要 |
   | S-02 | ログイン画面 | 既存ユーザーがログインする画面 | 不要 |
   | S-03 | AIチャット画面 | AI との対話を行うメイン画面 | 不要（ブックマーク機能は認証必要） |
   | S-04 | ブックマーク一覧画面 | 保存したブックマークを管理する画面 | 必須 |
   | S-05 | 削除確認モーダル | ブックマーク削除時の確認ダイアログ | - |
   | S-06 | サイドバー | 各画面へのナビゲーションと認証機能 | - |

2. 画面設計詳細
   2.1. S-01: 新規登録画面

   **2.1.1. 画面概要**
   - 新規ユーザーがメールアドレスとパスワードでアカウントを作成する画面
   - Supabase Auth を使用した認証機能

   **2.1.2. レイアウト**
   ```
   ┌─────────────────────────────────────┐
   │          ヘッダー（アプリ名）          │
   ├─────────────────────────────────────┤
   │                                     │
   │          [新規登録フォーム]          │
   │                                     │
   │   メールアドレス: [入力欄]           │
   │   パスワード: [入力欄]               │
   │   パスワード確認: [入力欄]           │
   │                                     │
   │   [新規登録ボタン]                  │
   │                                     │
   │   既にアカウントをお持ちですか？      │
   │   [ログイン画面へ]                  │
   │                                     │
   └─────────────────────────────────────┘
   ```

   **2.1.3. UI要素**
   | 要素 | 説明 | 必須 |
   |------|------|------|
   | アプリケーション名 | ヘッダーに表示 | ○ |
   | メールアドレス入力欄 | メールアドレスを入力（type="email"） | ○ |
   | パスワード入力欄 | パスワードを入力（type="password"） | ○ |
   | パスワード確認入力欄 | パスワードを再入力（type="password"） | ○ |
   | 新規登録ボタン | フォーム送信ボタン | ○ |
   | ログイン画面へのリンク | 既存ユーザー向け | ○ |
   | エラーメッセージ表示領域 | バリデーションエラーを表示 | - |
   | ローディングインジケーター | 登録処理中の表示 | - |

   **2.1.4. バリデーション**
   - メールアドレス: 有効なメールアドレス形式であること
   - パスワード: 8文字以上であること
   - パスワード確認: パスワードと一致すること

   **2.1.5. 操作フロー**
   1. ユーザーがメールアドレス、パスワード、パスワード確認を入力
   2. 「新規登録」ボタンをクリック
   3. バリデーション実行
   4. 成功時: ログイン状態になり、AIチャット画面（S-03）に遷移
   5. 失敗時: エラーメッセージを表示（例: 「このメールアドレスは既に登録されています」）

   **2.1.6. エラーハンドリング**
   - メールアドレス重複: 「このメールアドレスは既に登録されています」
   - パスワード要件不満足: 「パスワードは8文字以上で入力してください」
   - パスワード不一致: 「パスワードが一致しません」
   - ネットワークエラー: 「通信エラーが発生しました。しばらく待ってから再度お試しください」

   2.2. S-02: ログイン画面

   **2.2.1. 画面概要**
   - 既存ユーザーがメールアドレスとパスワードでログインする画面
   - ソーシャルログイン（Google等）のオプションも提供

   **2.2.2. レイアウト**
   ```
   ┌─────────────────────────────────────┐
   │          ヘッダー（アプリ名）          │
   ├─────────────────────────────────────┤
   │                                     │
   │          [ログインフォーム]          │
   │                                     │
   │   メールアドレス: [入力欄]           │
   │   パスワード: [入力欄]               │
   │                                     │
   │   [ログインボタン]                  │
   │                                     │
   │   ───── または ─────               │
   │                                     │
   │   [Googleでログイン]                │
   │                                     │
   │   アカウントをお持ちでないですか？    │
   │   [新規登録画面へ]                  │
   │                                     │
   └─────────────────────────────────────┘
   ```

   **2.2.3. UI要素**
   | 要素 | 説明 | 必須 |
   |------|------|------|
   | アプリケーション名 | ヘッダーに表示 | ○ |
   | メールアドレス入力欄 | メールアドレスを入力（type="email"） | ○ |
   | パスワード入力欄 | パスワードを入力（type="password"） | ○ |
   | ログインボタン | フォーム送信ボタン | ○ |
   | Googleログインボタン | ソーシャルログイン（オプション） | - |
   | 新規登録画面へのリンク | 新規ユーザー向け | ○ |
   | エラーメッセージ表示領域 | 認証エラーを表示 | - |
   | ローディングインジケーター | ログイン処理中の表示 | - |

   **2.2.4. 操作フロー**
   1. ユーザーがメールアドレスとパスワードを入力
   2. 「ログイン」ボタンをクリック
   3. 認証処理実行
   4. 成功時: ログイン状態になり、AIチャット画面（S-03）に遷移
   5. 失敗時: エラーメッセージを表示（例: 「メールアドレスまたはパスワードが正しくありません」）

   **2.2.5. エラーハンドリング**
   - 認証失敗: 「メールアドレスまたはパスワードが正しくありません」
   - ネットワークエラー: 「通信エラーが発生しました。しばらく待ってから再度お試しください」

   2.3. S-03: AIチャット画面

   **2.3.1. 画面概要**
   - AI との対話を行うメイン画面
   - ユーザーが学習したい内容を入力し、AI が3つの英語表現を提案
   - 各提案メッセージに音声再生とブックマーク機能を提供
   - PC画面ではサイドバー（S-06）を表示

   **2.3.2. レイアウト（PC）**
   ```
   ┌──────┬─────────────────────────────────────┐
   │      │  [アプリ名]        [ハンバーガー]     │ ← ヘッダー
   │ サイ │ ├───────────────────────────────────┤
   │ ド   │                                     │
   │ バ   │  [AI] こんにちは！今日はどんな英語を  │ ← チャットログ
   │ ー   │       学びたいですか？               │
   │      │                                     │
   │ (S-  │                    [ユーザー] 会議で │
   │ 06)  │                    使えるフレーズ    │
   │      │                                     │
   │      │  [AI] ┌─────────────────────┐      │
   │      │       │ "Let's get started." │      │
   │      │       │ 「始めましょう。」    │      │
   │      │       │ [🔊] [⭐]            │      │
   │      │       └─────────────────────┘      │
   │      │                                     │
   │      │  [AI] ┌─────────────────────┐      │
   │      │       │ "I'd like to discuss..." │  │
   │      │       │ 「〜について話し合いたい」│  │
   │      │       │ [🔊] [⭐]            │      │
   │      │       └─────────────────────┘      │
   │      │                                     │
   │      │  [AI] ┌─────────────────────┐      │
   │      │       │ "Could you share..." │      │
   │      │       │ 「〜を共有していただけますか」│
   │      │       │ [🔊] [⭐]            │      │
   │      │       └─────────────────────┘      │
   │      │                                     │
   │      ├─────────────────────────────────────┤
   │      │  [テキスト入力欄]        [送信ボタン] │ ← フッター
   └──────┴─────────────────────────────────────┘
   ```

   **2.3.2-2. レイアウト（スマートフォン）**
   ```
   ┌─────────────────────────────────────┐
   │  [☰] [アプリ名]        [ブックマーク] │ ← ヘッダー
   ├─────────────────────────────────────┤
   │                                     │
   │  [AI] こんにちは！今日はどんな英語を  │ ← チャットログ
   │       学びたいですか？               │
   │                                     │
   │                    [ユーザー] 会議で │
   │                    使えるフレーズ    │
   │                                     │
   │  [AI] ┌─────────────────────┐      │
   │       │ "Let's get started." │      │
   │       │ 「始めましょう。」    │      │
   │       │ [🔊] [⭐]            │      │
   │       └─────────────────────┘      │
   │                                     │
   ├─────────────────────────────────────┤
   │  [テキスト入力欄]        [送信ボタン] │ ← フッター
   └─────────────────────────────────────┘
   ```

   **2.3.3. UI要素**
   | 要素 | 説明 | 必須 |
   |------|------|------|
   | ヘッダー | アプリケーション名とハンバーガーメニュー（スマホ）/ サイドバー（PC） | ○ |
   | サイドバー | PC画面で常時表示、スマホではハンバーガーメニューで表示 | ○ |
   | チャットログ領域 | メッセージをスクロール可能な領域で表示 | ○ |
   | AI メッセージ | 左寄せで表示、AI アイコン付き | ○ |
   | ユーザーメッセージ | 右寄せで表示 | ○ |
   | 提案メッセージ（吹き出し） | AI が生成した3つの英語表現を個別の吹き出しで表示 | ○ |
   | 英語例文 | 提案メッセージ内に表示 | ○ |
   | 日本語訳 | 提案メッセージ内に表示 | ○ |
   | 音声アイコン | 音声再生ボタン（🔊） | ○ |
   | ブックマークアイコン | ブックマーク登録ボタン（⭐/★） | ○ |
   | テキスト入力欄 | ユーザー入力用（プレースホルダー: 「学習したい内容を入力...」） | ○ |
   | 送信ボタン | メッセージ送信ボタン | ○ |
   | ローディングインジケーター | AI 応答待ちの表示 | - |

   **2.3.4. 提案メッセージ（吹き出し）の詳細**
   - **レイアウト**: カード形式の吹き出し、左寄せで表示
   - **内容**:
     - 英語例文（上部、太字推奨）
     - 日本語訳（下部、小さめのフォント）
     - アイコンエリア（右下）: 音声アイコン、ブックマークアイコン
   - **ブックマークアイコンの状態**:
     - 未登録: 白抜きの星アイコン（⭐）
     - 登録済み: 塗りつぶされた星アイコン（★）
   - **音声再生**: クリック時に Web Speech API で英文を音声合成して再生

   **2.3.5. 操作フロー**
   1. 画面表示時: AI からの初期メッセージを表示（F-01）
   2. ユーザーが学習したい内容を入力（F-02）
   3. 「送信」ボタンをクリック
   4. ローディングインジケーターを表示
   5. AI が3つの英語表現をストリーミング形式で生成・表示（F-03）
   6. 各提案メッセージに対して:
      - 音声アイコンクリック → 音声再生（F-04）
      - ブックマークアイコンクリック → ブックマーク登録（F-05、認証が必要な場合はログイン画面へ誘導）

   **2.3.6. ブックマーク機能の認証処理**
   - 未ログイン状態でブックマークアイコンをクリックした場合:
     - 確認モーダルを表示: 「ブックマーク機能を使用するにはログインが必要です。ログインしますか？」
     - 「はい」→ ログイン画面（S-02）に遷移
     - 「いいえ」→ モーダルを閉じる

   **2.3.7. パフォーマンス要件**
   - AI 応答時間: ユーザー送信後、5秒以内に最初の提案が表示されること
   - 音声再生: 音声アイコンクリック後、2秒以内に再生が開始されること

   2.4. S-04: ブックマーク一覧画面

   **2.4.1. 画面概要**
   - ユーザーが保存したブックマークを一覧表示する画面
   - 各ブックマークに対して音声再生と削除機能を提供
   - 認証必須（未ログイン時はログイン画面へ誘導）

   **2.4.2. レイアウト（PC）**
   ```
   ┌──────┬─────────────────────────────────────┐
   │      │  [←] ブックマーク一覧                │ ← ヘッダー
   │ サイ │ ├───────────────────────────────────┤
   │ ド   │                                     │
   │ バ   │  ┌─────────────────────────────┐   │
   │ ー   │  │ "Let's get started."         │   │
   │      │  │ 「始めましょう。」            │   │
   │ (S-  │  │ [🔊]              [🗑️]      │   │
   │ 06)  │  └─────────────────────────────┘   │
   │      │                                     │
   │      │  ┌─────────────────────────────┐   │
   │      │  │ "I'd like to discuss..."     │   │
   │      │  │ 「〜について話し合いたい」    │   │
   │      │  │ [🔊]              [🗑️]      │   │
   │      │  └─────────────────────────────┘   │
   │      │                                     │
   │      │  ┌─────────────────────────────┐   │
   │      │  │ "Could you share..."         │   │
   │      │  │ 「〜を共有していただけますか」  │   │
   │      │  │ [🔊]              [🗑️]      │   │
   │      │  └─────────────────────────────┘   │
   │      │                                     │
   │      │  （ブックマークがない場合）          │
   │      │  まだブックマークがありません。     │
   │      │  チャット画面で英語表現を           │
   │      │  ブックマークしてみましょう！        │
   │      │                                     │
   └──────┴─────────────────────────────────────┘
   ```

   **2.4.2-2. レイアウト（スマートフォン）**
   ```
   ┌─────────────────────────────────────┐
   │  [☰] [←] ブックマーク一覧            │ ← ヘッダー
   ├─────────────────────────────────────┤
   │                                     │
   │  ┌─────────────────────────────┐   │
   │  │ "Let's get started."         │   │
   │  │ 「始めましょう。」            │   │
   │  │ [🔊]              [🗑️]      │   │
   │  └─────────────────────────────┘   │
   │                                     │
   │  ┌─────────────────────────────┐   │
   │  │ "I'd like to discuss..."     │   │
   │  │ 「〜について話し合いたい」    │   │
   │  │ [🔊]              [🗑️]      │   │
   │  └─────────────────────────────┘   │
   │                                     │
   │  ┌─────────────────────────────┐   │
   │  │ "Could you share..."         │   │
   │  │ 「〜を共有していただけますか」  │   │
   │  │ [🔊]              [🗑️]      │   │
   │  └─────────────────────────────┘   │
   │                                     │
   │  （ブックマークがない場合）          │
   │  まだブックマークがありません。     │
   │  チャット画面で英語表現を           │
   │  ブックマークしてみましょう！        │
   │                                     │
   └─────────────────────────────────────┘
   ```

   **2.4.3. UI要素**
   | 要素 | 説明 | 必須 |
   |------|------|------|
   | ヘッダー | 「ブックマーク一覧」タイトルと戻るボタン | ○ |
   | 戻るボタン | チャット画面（S-03）に戻る | ○ |
   | ブックマークカード | 各ブックマークをカード形式で表示 | ○ |
   | 英語例文 | カード内に表示（上部） | ○ |
   | 日本語訳 | カード内に表示（下部） | ○ |
   | 音声アイコン | 音声再生ボタン（🔊） | ○ |
   | 削除アイコン | 削除ボタン（🗑️） | ○ |
   | 空状態メッセージ | ブックマークがない場合の表示 | ○ |
   | ローディングインジケーター | データ取得中の表示 | - |

   **2.4.4. 操作フロー**
   1. 画面表示時: ユーザーのブックマーク一覧を取得（F-06）
   2. ブックマークがない場合: 空状態メッセージを表示
   3. 音声アイコンクリック: 音声再生（F-07）
   4. 削除アイコンクリック: 削除確認モーダル（S-05）を表示（F-08）

   **2.4.5. 認証チェック**
   - 未ログイン状態でアクセスした場合: ログイン画面（S-02）にリダイレクト

   **2.4.6. ソート・フィルタ**
   - デフォルト: 作成日時の降順（新しいものから）
   - 将来的な拡張: 日付順、アルファベット順などのソート機能

   2.5. S-05: 削除確認モーダル

   **2.5.1. 画面概要**
   - ブックマーク削除時に表示される確認ダイアログ
   - 誤操作を防ぐための確認ステップ

   **2.5.2. レイアウト**
   ```
   ┌─────────────────────────────────────┐
   │  （背景: 半透明のオーバーレイ）      │
   │                                     │
   │        ┌───────────────────┐        │
   │        │ このブックマークを削除      │
   │        │ しますか？                │
   │        │                          │
   │        │  [いいえ]    [はい]      │
   │        └───────────────────┘        │
   │                                     │
   └─────────────────────────────────────┘
   ```

   **2.5.3. UI要素**
   | 要素 | 説明 | 必須 |
   |------|------|------|
   | オーバーレイ | 背景を半透明の黒で覆う | ○ |
   | モーダルウィンドウ | 中央に表示されるダイアログ | ○ |
   | 確認メッセージ | 「このブックマークを削除しますか？」 | ○ |
   | 「いいえ」ボタン | モーダルを閉じる（削除しない） | ○ |
   | 「はい」ボタン | 削除を実行 | ○ |

   **2.5.4. 操作フロー**
   1. ブックマーク一覧画面（S-04）で削除アイコンをクリック
   2. モーダルを表示
   3. 「いいえ」をクリック: モーダルを閉じる（削除しない）
   4. 「はい」をクリック: ブックマークを削除し、モーダルを閉じる

   2.6. S-06: サイドバー

   **2.6.1. 画面概要**
   - 各画面へのナビゲーションと認証機能を提供するサイドバー
   - PC画面では常時表示、スマートフォンではハンバーガーメニューで表示
   - 認証状態に応じて表示内容が変化

   **2.6.2. レイアウト（PC）**
   ```
   ┌──────────────┐
   │  [アプリ名]   │ ← ロゴエリア
   ├──────────────┤
   │              │
   │  💬 チャット  │ ← メニュー項目
   │              │
   │  ⭐ ブックマーク│
   │              │
   ├──────────────┤
   │              │
   │  👤 ログイン  │ ← 認証エリア
   │              │ （未ログイン時）
   │  新規登録     │
   │              │
   │  ────────── │
   │              │
   │  👤 ユーザー名 │ ← 認証エリア
   │              │ （ログイン時）
   │  ログアウト   │
   │              │
   └──────────────┘
   ```

   **2.6.3. レイアウト（スマートフォン - ハンバーガーメニュー）**
   ```
   ┌─────────────────────────────────────┐
   │  （背景: 半透明のオーバーレイ）      │
   │                                     │
   │  ┌───────────────────────────────┐  │
   │  │  [×]                          │  │ ← 閉じるボタン
   │  │                               │  │
   │  │  [アプリ名]                    │  │
   │  │                               │  │
   │  │  💬 チャット                  │  │
   │  │                               │  │
   │  │  ⭐ ブックマーク              │  │
   │  │                               │  │
   │  │  ────────────────            │  │
   │  │                               │  │
   │  │  👤 ログイン                  │  │
   │  │  新規登録                     │  │
   │  │                               │  │
   │  │  （または）                    │  │
   │  │                               │  │
   │  │  👤 ユーザー名                │  │
   │  │  ログアウト                   │  │
   │  │                               │  │
   │  └───────────────────────────────┘  │
   │                                     │
   └─────────────────────────────────────┘
   ```

   **2.6.4. UI要素**
   | 要素 | 説明 | 必須 | 表示条件 |
   |------|------|------|---------|
   | アプリケーションロゴ | アプリ名またはロゴ | ○ | 常時 |
   | チャットメニュー | チャット画面（S-03）へのリンク | ○ | 常時 |
   | ブックマークメニュー | ブックマーク一覧画面（S-04）へのリンク | ○ | 常時 |
   | ログインメニュー | ログイン画面（S-02）へのリンク | ○ | 未ログイン時 |
   | 新規登録メニュー | 新規登録画面（S-01）へのリンク | ○ | 未ログイン時 |
   | ユーザー情報 | ログイン中のユーザー名またはメールアドレス | ○ | ログイン時 |
   | ログアウトボタン | ログアウト機能 | ○ | ログイン時 |
   | ハンバーガーメニューアイコン | スマホでサイドバーを開く | ○ | スマホのみ |
   | 閉じるボタン | スマホでサイドバーを閉じる | ○ | スマホのみ |
   | オーバーレイ | スマホでサイドバー表示時の背景 | ○ | スマホのみ |

   **2.6.5. 操作フロー**
   1. **PC画面**:
      - サイドバーは常時表示
      - メニュー項目をクリック → 該当画面に遷移
      - ログアウトボタンクリック → ログアウト処理 → ログイン画面に遷移

   2. **スマートフォン画面**:
      - ハンバーガーメニューアイコン（☰）をタップ → サイドバーを表示（スライドイン）
      - メニュー項目をタップ → 該当画面に遷移 → サイドバーを自動的に閉じる
      - 閉じるボタン（×）またはオーバーレイをタップ → サイドバーを閉じる（スライドアウト）

   **2.6.6. 認証状態による表示切り替え**
   - **未ログイン時**:
     - 「ログイン」メニューを表示
     - 「新規登録」メニューを表示
     - 「ブックマーク」メニューは表示するが、クリック時にログイン画面へ誘導
   
   - **ログイン時**:
     - ユーザー名またはメールアドレスを表示
     - 「ログアウト」ボタンを表示
     - 「ブックマーク」メニューは通常通り機能

   **2.6.7. アクティブ状態の表示**
   - 現在表示中の画面に対応するメニュー項目をハイライト表示
   - 例: チャット画面表示中は「チャット」メニューをアクティブ状態（背景色変更、アイコン強調等）で表示

   **2.6.8. アニメーション**
   - **スマートフォン**:
     - サイドバー表示: 左からスライドイン（0.3秒）
     - サイドバー非表示: 左にスライドアウト（0.3秒）
     - オーバーレイ: フェードイン/フェードアウト（0.2秒）
   - **PC**:
     - メニュー項目ホバー: 背景色変更（0.2秒）
     - アクティブ状態: スムーズなトランジション

   **2.6.9. アクセシビリティ**
   - キーボード操作: Tabキーでメニュー項目間を移動、Enterキーで選択
   - ARIAラベル:
     - ハンバーガーメニュー: `aria-label="メニューを開く"`
     - 閉じるボタン: `aria-label="メニューを閉じる"`
     - 各メニュー項目: `aria-label="[画面名]に移動"`
   - フォーカス管理: サイドバー表示時、最初のメニュー項目にフォーカス

3. レスポンシブデザイン
   3.1. ブレークポイント
   | デバイス | 画面幅 | 対応方針 |
   |---------|--------|---------|
   | スマートフォン | 〜768px | 1カラムレイアウト、タッチ操作最適化、サイドバーはハンバーガーメニュー |
   | タブレット | 769px〜1024px | 1〜2カラムレイアウト、サイドバーは折りたたみ可能 |
   | PC | 1025px〜 | 2カラムレイアウト（メインコンテンツ + サイドバー）、サイドバー常時表示 |

   3.2. スマートフォン対応
   - チャット画面: 入力欄を画面下部に固定、キーボード表示時も操作可能
   - ブックマーク一覧: カードを全幅表示、タッチしやすいボタンサイズ（最小44×44px）
   - モーダル: 画面幅に合わせて調整
   - サイドバー: ハンバーガーメニューで表示、全画面オーバーレイ形式

   3.3. タブレット対応
   - チャット画面: 最大幅を設定し、中央配置
   - ブックマーク一覧: グリッドレイアウト（2カラム）
   - サイドバー: 折りたたみ可能、必要に応じて表示/非表示を切り替え

   3.4. PC対応
   - サイドバー: 常時表示、幅は240px〜280px程度
   - メインコンテンツ: サイドバーの幅を考慮してレイアウト
   - サイドバーの折りたたみ機能（オプション）: アイコンのみ表示モード

4. アクセシビリティ要件
   4.1. WCAG 2.1 準拠
   - **レベル AA** を目標とする

   4.2. 具体的な要件
   | 項目 | 要件 |
   |------|------|
   | キーボード操作 | すべての機能をキーボードで操作可能 |
   | スクリーンリーダー | 適切なARIAラベルとセマンティックHTML |
   | コントラスト比 | テキストと背景のコントラスト比 4.5:1 以上 |
   | フォーカス表示 | フォーカス可能な要素に明確なフォーカスインジケーター |
   | エラーメッセージ | エラーを明確に伝えるメッセージとアナウンス |

   4.3. ARIAラベル例
   - 音声アイコン: `aria-label="音声を再生"`
   - ブックマークアイコン: `aria-label="ブックマークに追加"` / `aria-label="ブックマークを解除"`
   - 削除アイコン: `aria-label="ブックマークを削除"`
   - 送信ボタン: `aria-label="メッセージを送信"`
   - ハンバーガーメニュー: `aria-label="メニューを開く"` / `aria-label="メニューを閉じる"`
   - サイドバーメニュー項目: `aria-label="チャット画面に移動"` / `aria-label="ブックマーク一覧に移動"`

5. UIコンポーネント仕様
   5.1. カラーパレット（推奨）
   | 用途 | カラー | 使用例 |
   |------|--------|--------|
   | プライマリ | #3B82F6 (青) | 送信ボタン、リンク |
   | セカンダリ | #10B981 (緑) | 成功メッセージ |
   | エラー | #EF4444 (赤) | エラーメッセージ |
   | 警告 | #F59E0B (オレンジ) | 警告メッセージ |
   | 背景 | #FFFFFF (白) / #F9FAFB (グレー) | 画面背景 |
   | テキスト | #111827 (黒) / #6B7280 (グレー) | 本文テキスト |

   5.2. タイポグラフィ
   | 要素 | フォントサイズ | フォントウェイト |
   |------|--------------|----------------|
   | 見出し | 24px | Bold |
   | サブ見出し | 18px | Semi-Bold |
   | 本文 | 16px | Regular |
   | キャプション | 14px | Regular |
   | 英語例文 | 18px | Semi-Bold |

   5.3. アイコン
   - 音声再生: 🔊 (または Material Icons の `volume_up`)
   - ブックマーク（未登録）: ⭐ (または Material Icons の `star_border`)
   - ブックマーク（登録済み）: ★ (または Material Icons の `star`)
   - 削除: 🗑️ (または Material Icons の `delete`)
   - 戻る: ← (または Material Icons の `arrow_back`)
   - ハンバーガーメニュー: ☰ (または Material Icons の `menu`)
   - 閉じる: × (または Material Icons の `close`)
   - チャット: 💬 (または Material Icons の `chat`)
   - ブックマーク: ⭐ (または Material Icons の `bookmark`)
   - ユーザー: 👤 (または Material Icons の `account_circle`)

6. 画面遷移図
   ```
   新規登録画面 (S-01)
        ↓ [登録成功]
   AIチャット画面 (S-03) ← [サイドバー: チャット]
        ↑         ↓
   ログイン画面 (S-02)  [サイドバー: ブックマーク]
        ↓ [ログイン成功]      ↓
   AIチャット画面 (S-03)  ブックマーク一覧画面 (S-04)
        ↑                        ↓ [削除アイコン]
   [サイドバー: チャット]    削除確認モーダル (S-05)
        ↑
   [サイドバー: ログイン/新規登録] (未ログイン時)
   [サイドバー: ログアウト] (ログイン時)
   ```

7. 状態管理
   7.1. 認証状態
   - ログイン状態: Supabase Auth のセッションで管理
   - 未ログイン時: ブックマーク機能は制限

   7.2. チャット状態
   - メッセージ履歴: クライアント側の状態管理（React State等）
   - AI 応答中: ローディング状態を管理

   7.3. ブックマーク状態
   - 一覧データ: サーバーから取得、クライアント側でキャッシュ
   - 登録/削除: リアルタイムでUIを更新

8. エラーハンドリング（UI側）
   8.1. エラー表示
   - トースト通知: 一時的なエラーメッセージ
   - インラインエラー: フォーム入力エラー
   - エラーページ: 重大なエラー（404、500等）

   8.2. リトライ機能
   - ネットワークエラー時: リトライボタンを表示
   - AI 応答エラー時: 再送信ボタンを表示

9. パフォーマンス最適化
   9.1. 画像・アイコン
   - アイコンは SVG またはアイコンフォントを使用
   - 画像は必要に応じて遅延読み込み

   9.2. データ取得
   - ブックマーク一覧: 初回読み込み後はキャッシュを活用
   - AI 応答: ストリーミング形式で段階的に表示

   9.3. レンダリング最適化
   - 仮想スクロール: チャットログが長い場合に適用
   - メモ化: 不要な再レンダリングを防止

10. 変更履歴
    | バージョン | 日付 | 変更内容 | 変更者 |
    |-----------|------|---------|--------|
    | 1.0 | 2024-XX-XX | 初版作成 | - |
    | 1.1 | 2024-XX-XX | サイドバー（S-06）の設計を追加 | - |

